<html>
    <head>

        <meta charset="utf-8"/>
        <link rel="icon" href="estilo/favicon.ico">
        <title>Ancian</title>
        <link rel="stylesheet" href="estilo/main.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
        <script>

            wh = window.innerHeight

            document.documentElement.style.backgroundSize = '400%'

            if(window.innerWidth > 2*wh) document.documentElement.style.backgroundSize = '100%' 

            window.onresize = () => {

            wh = window.innerHeight
            document.documentElement.style.backgroundSize = '400%'

            if(window.innerWidth > 2*wh) document.documentElement.style.backgroundSize = '100%' 

            }
        </script>


    </head>
    <body>
        <div class="containner">

            <img src="icon.png"/>
            <p id='log'>Salas dispon√≠veis</p>

            <div id="salas"></div>

        </div>

        <script>

            var salas = []
            var as = []

            var div = document.getElementById('salas')

            var sockets = io.connect()

            .on('sala on', (sala)=>{

                if(!salas.includes(sala)){
                    
                    salas.push(sala)

                    var a = document.createElement('a')

                    var bt = document.createElement('button')
                    bt.className = 'op'
                    bt.innerHTML = sala
                    a.href = 'play/'+sala

                    a.appendChild(bt)

                    div.appendChild(a)
                    as.push(a)

                }

            })

            .on('sala off', (sala) => {

                var i = salas.indexOf(sala)

                delete salas[i]
                div.removeChild(as[i])
                delete as[i]

            })

            sockets.emit("procurando salas")

        </script>
    </body>
    <script>
    </script>
</html>